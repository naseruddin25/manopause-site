---
import BaseLayout from './BaseLayout.astro';

export interface Props {
  title: string;
  description?: string;
  category?: string;
  lastUpdated?: string;
  readTime?: string;
}

const { title, description, category, lastUpdated, readTime } = Astro.props;
---

<BaseLayout title={title} description={description}>
  <article class="article">
    <header class="article-header">
      <div class="container container-content">
        {category && <span class="article-category">{category}</span>}
        <h1 class="article-title">{title}</h1>
        {description && <p class="article-desc">{description}</p>}
        <div class="article-meta">
          {readTime && <span class="read-time">{readTime} read</span>}
          {lastUpdated && <span class="updated">Updated: {lastUpdated}</span>}
        </div>
      </div>
    </header>
    
    <div class="article-content">
      <div class="container container-content">
        <slot />
        
        <!-- Safety Footer -->
        <div class="article-safety-footer">
          <div class="safety-callout">
            <p class="safety-callout-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
              If This Feels Unsafeâ€¦
            </p>
            <p>Trust your instincts. If any part of this information triggered concern about your safety or someone else's, help is available. You don't have to figure this out alone.</p>
            <div class="mt-md">
              <a href="/get-help" class="btn btn-safety">Get Help Now</a>
            </div>
          </div>
        </div>
        
        <!-- Disclaimer -->
        <div class="disclaimer">
          <p class="disclaimer-title">Educational Disclaimer</p>
          <p>This content is for educational purposes only. It is not therapy, medical advice, legal advice, or a substitute for professional treatment. Always consult qualified professionals for your specific situation.</p>
        </div>
      </div>
    </div>
    
    <!-- Related Resources -->
    <aside class="article-sidebar">
      <div class="container container-content">
        <div class="sidebar-box">
          <h3>Related Resources</h3>
          <slot name="related" />
        </div>
      </div>
    </aside>
  </article>
</BaseLayout>

<style>
  .article-header {
    background-color: var(--color-bg-alt);
    padding: var(--space-3xl) 0;
    border-bottom: 1px solid var(--color-border-light);
  }
  
  .article-category {
    display: inline-block;
    font-size: var(--text-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-primary);
    margin-bottom: var(--space-md);
  }
  
  .article-title {
    font-size: var(--text-3xl);
    margin-bottom: var(--space-md);
  }
  
  .article-desc {
    font-size: var(--text-lg);
    color: var(--color-text-light);
    max-width: 600px;
  }
  
  .article-meta {
    display: flex;
    gap: var(--space-lg);
    margin-top: var(--space-lg);
    font-size: var(--text-sm);
    color: var(--color-text-muted);
  }
  
  .article-content {
    padding: var(--space-3xl) 0;
  }
  
  .article-content :global(h2) {
    margin-top: var(--space-2xl);
    padding-top: var(--space-xl);
    border-top: 1px solid var(--color-border-light);
  }
  
  .article-content :global(h2:first-child) {
    margin-top: 0;
    padding-top: 0;
    border-top: none;
  }
  
  .article-content :global(h3) {
    margin-top: var(--space-xl);
  }
  
  .article-safety-footer {
    margin-top: var(--space-3xl);
    padding-top: var(--space-2xl);
    border-top: 1px solid var(--color-border-light);
  }
  
  .article-sidebar {
    background-color: var(--color-bg-alt);
    padding: var(--space-2xl) 0;
    border-top: 1px solid var(--color-border-light);
  }
  
  .sidebar-box {
    background-color: var(--color-bg-card);
    border: 1px solid var(--color-border-light);
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
  }
  
  .sidebar-box h3 {
    font-size: var(--text-lg);
    margin-bottom: var(--space-md);
  }
  
  .sidebar-box :global(ul) {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .sidebar-box :global(li) {
    margin-bottom: var(--space-sm);
  }
  
  .sidebar-box :global(a) {
    color: var(--color-text);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) 0;
    transition: color var(--transition-fast);
  }
  
  .sidebar-box :global(a:hover) {
    color: var(--color-primary);
  }
</style>
